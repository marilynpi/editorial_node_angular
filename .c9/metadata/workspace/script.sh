{"filter":false,"title":"script.sh","tooltip":"/script.sh","undoManager":{"mark":12,"position":12,"stack":[[{"start":{"row":0,"column":0},"end":{"row":43,"column":4},"action":"insert","lines":["#!/usr/bin/env bash","","INFO=\"sails-mysql-transactions:\"; # for console logs","","MOD_DIR=\"../../node_modules\";","","set -e;","","# If this is an NPM installation, we do not expect `.gitmodules` in the directory","# since it is ignored by `.npmignore`. This is a fairly robust check to test whether","# this script has been run as part of npm install or as part of self install.","if [ -f \".gitmodules\" ]; then","    echo \"${INFO} Not an NPM install, exiting waterline injection.\";","    exit 0;","fi;","","# Check whether sails has been already installed or not. If not, this is an","# error and we should not proceed.","if [ ! -d \"${MOD_DIR}/sails\" ]; then","    echo -e \"\\033[1;31m\";","    echo \"${INFO} Sails installation not found!\";","    echo \"${INFO} Ensure your package.json, which has sails-mysql-transaction, also includes sails.\";","    echo -e \"\\033[0m\\n\";","    exit 1;","fi","","if [ -d \"${MOD_DIR}/sails-mysql\" ]; then","    echo -e \"\\033[1;31m\";","    echo \"${INFO} WARNING - detected sails-mysql.\";","    echo \"${INFO} You may face unexpected behaviour.\";","    echo \"${INFO} Preferably remove sails-mysql from packages before using this in production.\";","    echo -e \"\\033[0m\\n\";","fi","","echo \"${INFO} Injecting waterline...\";","","pushd \"${MOD_DIR}/sails\" > /dev/null;","npm remove waterline;","npm install \"${MOD_DIR}/sails-mysql-transactions/waterline\";","popd > /dev/null;","","echo","echo \"${INFO} Installation successful.\";","echo"],"id":1}],[{"start":{"row":37,"column":0},"end":{"row":37,"column":1},"action":"insert","lines":["s"],"id":2}],[{"start":{"row":37,"column":1},"end":{"row":37,"column":2},"action":"insert","lines":["u"],"id":3}],[{"start":{"row":37,"column":2},"end":{"row":37,"column":3},"action":"insert","lines":["d"],"id":4}],[{"start":{"row":37,"column":3},"end":{"row":37,"column":4},"action":"insert","lines":["o"],"id":5}],[{"start":{"row":37,"column":4},"end":{"row":37,"column":5},"action":"insert","lines":[" "],"id":6}],[{"start":{"row":38,"column":0},"end":{"row":38,"column":1},"action":"insert","lines":["s"],"id":7}],[{"start":{"row":38,"column":1},"end":{"row":38,"column":2},"action":"insert","lines":["u"],"id":8}],[{"start":{"row":38,"column":2},"end":{"row":38,"column":3},"action":"insert","lines":["d"],"id":9}],[{"start":{"row":38,"column":3},"end":{"row":38,"column":4},"action":"insert","lines":["o"],"id":10}],[{"start":{"row":38,"column":4},"end":{"row":38,"column":5},"action":"insert","lines":[" "],"id":11}],[{"start":{"row":4,"column":9},"end":{"row":4,"column":14},"action":"remove","lines":["../.."],"id":12}],[{"start":{"row":4,"column":9},"end":{"row":4,"column":10},"action":"remove","lines":["/"],"id":13}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":4,"column":9},"end":{"row":4,"column":9},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1437657012611,"hash":"23a0158db7bcd859803b7e8aef47ca2de5f4acf3"}