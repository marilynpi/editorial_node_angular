/*
 * angular-ui-bootstrap
 * http://angular-ui.github.io/bootstrap/

 * Version: 0.13.1-SNAPSHOT - 2015-07-23
 * License: MIT
 */
angular.module("ui.bootstrap",["ui.bootstrap.datepicker","ui.bootstrap.dateparser","ui.bootstrap.position"]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.position"]).constant("datepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null,shortcutPropagation:!1}).controller("DatepickerController",["$scope","$attrs","$parse","$interpolate","$log","dateFilter","datepickerConfig",function(e,t,a,r,n,i,o){var s=this,l={$setViewValue:angular.noop};this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","minMode","maxMode","showWeeks","startingDay","yearRange","shortcutPropagation"],function(a,n){s[a]=angular.isDefined(t[a])?8>n?r(t[a])(e.$parent):e.$parent.$eval(t[a]):o[a]}),angular.forEach(["minDate","maxDate"],function(r){t[r]?e.$parent.$watch(a(t[r]),function(e){s[r]=e?new Date(e):null,s.refreshView()}):s[r]=o[r]?new Date(o[r]):null}),e.datepickerMode=e.datepickerMode||o.datepickerMode,e.maxMode=s.maxMode,e.uniqueId="datepicker-"+e.$id+"-"+Math.floor(1e4*Math.random()),angular.isDefined(t.initDate)?(this.activeDate=e.$parent.$eval(t.initDate)||new Date,e.$parent.$watch(t.initDate,function(e){e&&(l.$isEmpty(l.$modelValue)||l.$invalid)&&(s.activeDate=e,s.refreshView())})):this.activeDate=new Date,e.isActive=function(t){return 0===s.compare(t.date,s.activeDate)?(e.activeDateId=t.uid,!0):!1},this.init=function(e){l=e,l.$render=function(){s.render()}},this.render=function(){if(l.$viewValue){var e=new Date(l.$viewValue),t=!isNaN(e);t?this.activeDate=e:n.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.'),l.$setValidity("date",t)}this.refreshView()},this.refreshView=function(){if(this.element){this._refreshView();var e=l.$viewValue?new Date(l.$viewValue):null;l.$setValidity("date-disabled",!e||this.element&&!this.isDisabled(e))}},this.createDateObject=function(e,t){var a=l.$viewValue?new Date(l.$viewValue):null;return{date:e,label:i(e,t),selected:a&&0===this.compare(e,a),disabled:this.isDisabled(e),current:0===this.compare(e,new Date),customClass:this.customClass(e)}},this.isDisabled=function(a){return this.minDate&&this.compare(a,this.minDate)<0||this.maxDate&&this.compare(a,this.maxDate)>0||t.dateDisabled&&e.dateDisabled({date:a,mode:e.datepickerMode})},this.customClass=function(t){return e.customClass({date:t,mode:e.datepickerMode})},this.split=function(e,t){for(var a=[];e.length>0;)a.push(e.splice(0,t));return a},this.fixTimeZone=function(e){var t=e.getHours();e.setHours(23===t?t+2:0)},e.select=function(t){if(e.datepickerMode===s.minMode){var a=l.$viewValue?new Date(l.$viewValue):new Date(0,0,0,0,0,0,0);a.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),l.$setViewValue(a),l.$render()}else s.activeDate=t,e.datepickerMode=s.modes[s.modes.indexOf(e.datepickerMode)-1]},e.move=function(e){var t=s.activeDate.getFullYear()+e*(s.step.years||0),a=s.activeDate.getMonth()+e*(s.step.months||0);s.activeDate.setFullYear(t,a,1),s.refreshView()},e.toggleMode=function(t){t=t||1,e.datepickerMode===s.maxMode&&1===t||e.datepickerMode===s.minMode&&-1===t||(e.datepickerMode=s.modes[s.modes.indexOf(e.datepickerMode)+t])},e.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var u=function(){s.element[0].focus()};e.$on("datepicker.focus",u),e.keydown=function(t){var a=e.keys[t.which];if(a&&!t.shiftKey&&!t.altKey)if(t.preventDefault(),s.shortcutPropagation||t.stopPropagation(),"enter"===a||"space"===a){if(s.isDisabled(s.activeDate))return;e.select(s.activeDate),u()}else!t.ctrlKey||"up"!==a&&"down"!==a?(s.handleKeyDown(a,t),s.refreshView()):(e.toggleMode("up"===a?1:-1),u())}}]).directive("datepicker",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/datepicker.html",scope:{datepickerMode:"=?",dateDisabled:"&",customClass:"&",shortcutPropagation:"&?"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(e,t,a,r){var n=r[0],i=r[1];i&&n.init(i)}}}).directive("daypicker",["dateFilter",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/day.html",require:"^datepicker",link:function(t,a,r,n){function i(e,t){return 1!==t||e%4!==0||e%100===0&&e%400!==0?l[t]:29}function o(e,t){for(var a,r=new Array(t),i=new Date(e),o=0;t>o;)a=new Date(i),n.fixTimeZone(a),r[o++]=a,i.setDate(i.getDate()+1);return r}function s(e){var t=new Date(e);t.setDate(t.getDate()+4-(t.getDay()||7));var a=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((a-t)/864e5)/7)+1}t.showWeeks=n.showWeeks,n.step={months:1},n.element=a;var l=[31,28,31,30,31,30,31,31,30,31,30,31];n._refreshView=function(){var a=n.activeDate.getFullYear(),r=n.activeDate.getMonth(),i=new Date(a,r,1),l=n.startingDay-i.getDay(),u=l>0?7-l:-l,c=new Date(i);u>0&&c.setDate(-u+1);for(var p=o(c,42),d=0;42>d;d++)p[d]=angular.extend(n.createDateObject(p[d],n.formatDay),{secondary:p[d].getMonth()!==r,uid:t.uniqueId+"-"+d});t.labels=new Array(7);for(var f=0;7>f;f++)t.labels[f]={abbr:e(p[f].date,n.formatDayHeader),full:e(p[f].date,"EEEE")};if(t.title=e(n.activeDate,n.formatDayTitle),t.rows=n.split(p,7),t.showWeeks){t.weekNumbers=[];for(var h=(11-n.startingDay)%7,g=t.rows.length,m=0;g>m;m++)t.weekNumbers.push(s(t.rows[m][h].date))}},n.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate())-new Date(t.getFullYear(),t.getMonth(),t.getDate())},n.handleKeyDown=function(e){var t=n.activeDate.getDate();if("left"===e)t-=1;else if("up"===e)t-=7;else if("right"===e)t+=1;else if("down"===e)t+=7;else if("pageup"===e||"pagedown"===e){var a=n.activeDate.getMonth()+("pageup"===e?-1:1);n.activeDate.setMonth(a,1),t=Math.min(i(n.activeDate.getFullYear(),n.activeDate.getMonth()),t)}else"home"===e?t=1:"end"===e&&(t=i(n.activeDate.getFullYear(),n.activeDate.getMonth()));n.activeDate.setDate(t)},n.refreshView()}}}]).directive("monthpicker",["dateFilter",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/month.html",require:"^datepicker",link:function(t,a,r,n){n.step={years:1},n.element=a,n._refreshView=function(){for(var a,r=new Array(12),i=n.activeDate.getFullYear(),o=0;12>o;o++)a=new Date(i,o,1),n.fixTimeZone(a),r[o]=angular.extend(n.createDateObject(a,n.formatMonth),{uid:t.uniqueId+"-"+o});t.title=e(n.activeDate,n.formatMonthTitle),t.rows=n.split(r,3)},n.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth())-new Date(t.getFullYear(),t.getMonth())},n.handleKeyDown=function(e){var t=n.activeDate.getMonth();if("left"===e)t-=1;else if("up"===e)t-=3;else if("right"===e)t+=1;else if("down"===e)t+=3;else if("pageup"===e||"pagedown"===e){var a=n.activeDate.getFullYear()+("pageup"===e?-1:1);n.activeDate.setFullYear(a)}else"home"===e?t=0:"end"===e&&(t=11);n.activeDate.setMonth(t)},n.refreshView()}}}]).directive("yearpicker",["dateFilter",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/year.html",require:"^datepicker",link:function(e,t,a,r){function n(e){return parseInt((e-1)/i,10)*i+1}var i=r.yearRange;r.step={years:i},r.element=t,r._refreshView=function(){for(var t,a=new Array(i),o=0,s=n(r.activeDate.getFullYear());i>o;o++)t=new Date(s+o,0,1),r.fixTimeZone(t),a[o]=angular.extend(r.createDateObject(t,r.formatYear),{uid:e.uniqueId+"-"+o});e.title=[a[0].label,a[i-1].label].join(" - "),e.rows=r.split(a,5)},r.compare=function(e,t){return e.getFullYear()-t.getFullYear()},r.handleKeyDown=function(e){var t=r.activeDate.getFullYear();"left"===e?t-=1:"up"===e?t-=5:"right"===e?t+=1:"down"===e?t+=5:"pageup"===e||"pagedown"===e?t+=("pageup"===e?-1:1)*r.step.years:"home"===e?t=n(r.activeDate.getFullYear()):"end"===e&&(t=n(r.activeDate.getFullYear())+i-1),r.activeDate.setFullYear(t)},r.refreshView()}}}]).constant("datepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",html5Types:{date:"yyyy-MM-dd","datetime-local":"yyyy-MM-ddTHH:mm:ss.sss",month:"yyyy-MM"},currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","dateParser","datepickerPopupConfig","$timeout",function(e,t,a,r,n,i,o,s){return{restrict:"EA",require:"ngModel",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&",customClass:"&"},link:function(l,u,c,p){function d(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function f(e){if(angular.isNumber(e)&&(e=new Date(e)),e){if(angular.isDate(e)&&!isNaN(e))return e;if(angular.isString(e)){var t=i.parse(e,g,l.date)||new Date(e);return isNaN(t)?void 0:t}return void 0}return null}function h(e,t){var a=e||t;if(angular.isNumber(a)&&(a=new Date(a)),a){if(angular.isDate(a)&&!isNaN(a))return!0;if(angular.isString(a)){var r=i.parse(a,g)||new Date(a);return!isNaN(r)}return!1}return!0}var g,m=angular.isDefined(c.closeOnDateSelection)?l.$parent.$eval(c.closeOnDateSelection):o.closeOnDateSelection,D=angular.isDefined(c.datepickerAppendToBody)?l.$parent.$eval(c.datepickerAppendToBody):o.appendToBody;l.showButtonBar=angular.isDefined(c.showButtonBar)?l.$parent.$eval(c.showButtonBar):o.showButtonBar,l.getText=function(e){return l[e+"Text"]||o[e+"Text"]};var y=!1;if(o.html5Types[c.type]?(g=o.html5Types[c.type],y=!0):(g=c.datepickerPopup||o.datepickerPopup,c.$observe("datepickerPopup",function(e){var t=e||o.datepickerPopup;if(t!==g&&(g=t,p.$modelValue=null,!g))throw new Error("datepickerPopup must have a date format specified.")})),!g)throw new Error("datepickerPopup must have a date format specified.");if(y&&c.datepickerPopup)throw new Error("HTML5 date input types do not support custom formats.");var v=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");v.attr({"ng-model":"date","ng-change":"dateSelection(date)"});var w=angular.element(v.children()[0]);if(y&&"month"==c.type&&(w.attr("datepicker-mode",'"month"'),w.attr("min-mode","month")),c.datepickerOptions){var M=l.$parent.$eval(c.datepickerOptions);M.initDate&&(l.initDate=M.initDate,w.attr("init-date","initDate"),delete M.initDate),angular.forEach(M,function(e,t){w.attr(d(t),e)})}l.watchData={},angular.forEach(["minDate","maxDate","datepickerMode","initDate","shortcutPropagation"],function(e){if(c[e]){var a=t(c[e]);if(l.$parent.$watch(a,function(t){l.watchData[e]=t}),w.attr(d(e),"watchData."+e),"datepickerMode"===e){var r=a.assign;l.$watch("watchData."+e,function(e,t){angular.isFunction(r)&&e!==t&&r(l.$parent,e)})}}}),c.dateDisabled&&w.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),c.showWeeks&&w.attr("show-weeks",c.showWeeks),c.customClass&&w.attr("custom-class","customClass({ date: date, mode: mode })"),y?p.$formatters.push(function(e){return l.date=e,e}):(p.$$parserName="date",p.$validators.date=h,p.$parsers.unshift(f),p.$formatters.push(function(e){return l.date=e,p.$isEmpty(e)?e:n(e,g)})),l.dateSelection=function(e){angular.isDefined(e)&&(l.date=e);var t=l.date?n(l.date,g):"";u.val(t),p.$setViewValue(t),m&&(l.isOpen=!1,u[0].focus())},p.$viewChangeListeners.push(function(){l.date=i.parse(p.$viewValue,g,l.date)||new Date(p.$viewValue)});var k=function(e){l.isOpen&&e.target!==u[0]&&l.$apply(function(){l.isOpen=!1})},$=function(e){27===e.which&&l.isOpen?(e.preventDefault(),e.stopPropagation(),l.$apply(function(){l.isOpen=!1}),u[0].focus()):40!==e.which||l.isOpen||(e.preventDefault(),e.stopPropagation(),l.$apply(function(){l.isOpen=!0}))};u.bind("keydown",$),l.keydown=function(e){27===e.which&&(l.isOpen=!1,u[0].focus())},l.$watch("isOpen",function(e){e?(l.position=D?r.offset(u):r.position(u),l.position.top=l.position.top+u.prop("offsetHeight"),a.bind("click",k),s(function(){l.$broadcast("datepicker.focus")},0,!1)):a.unbind("click",k)}),l.select=function(e){if("today"===e){var t=new Date;angular.isDate(l.date)?(e=new Date(l.date),e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate())):e=new Date(t.setHours(0,0,0,0))}l.dateSelection(e)},l.close=function(){l.isOpen=!1,u[0].focus()};var T=e(v)(l);v.remove(),D?a.find("body").append(T):u.after(T),l.$on("$destroy",function(){l.isOpen===!0&&l.$apply(function(){l.isOpen=!1}),T.remove(),u.unbind("keydown",$),a.unbind("click",k)})}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"template/datepicker/popup.html"}}),angular.module("ui.bootstrap.dateparser",[]).service("dateParser",["$locale","orderByFilter",function(e,t){function a(e){var a=[],r=e.split("");return angular.forEach(i,function(t,n){var i=e.indexOf(n);if(i>-1){e=e.split(""),r[i]="("+t.regex+")",e[i]="$";for(var o=i+1,s=i+n.length;s>o;o++)r[o]="",e[o]="$";e=e.join(""),a.push({index:i,apply:t.apply})}}),{regex:new RegExp("^"+r.join("")+"$"),map:t(a,"index")}}function r(e,t,a){return 1>a?!1:1===t&&a>28?29===a&&(e%4===0&&e%100!==0||e%400===0):3===t||5===t||8===t||10===t?31>a:!0}var n=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;this.parsers={};var i={yyyy:{regex:"\\d{4}",apply:function(e){this.year=+e}},yy:{regex:"\\d{2}",apply:function(e){this.year=+e+2e3}},y:{regex:"\\d{1,4}",apply:function(e){this.year=+e}},MMMM:{regex:e.DATETIME_FORMATS.MONTH.join("|"),apply:function(t){this.month=e.DATETIME_FORMATS.MONTH.indexOf(t)}},MMM:{regex:e.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(t){this.month=e.DATETIME_FORMATS.SHORTMONTH.indexOf(t)}},MM:{regex:"0[1-9]|1[0-2]",apply:function(e){this.month=e-1}},M:{regex:"[1-9]|1[0-2]",apply:function(e){this.month=e-1}},dd:{regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e}},d:{regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e}},EEEE:{regex:e.DATETIME_FORMATS.DAY.join("|")},EEE:{regex:e.DATETIME_FORMATS.SHORTDAY.join("|")},HH:{regex:"(?:0|1)[0-9]|2[0-3]",apply:function(e){this.hours=+e}},H:{regex:"1?[0-9]|2[0-3]",apply:function(e){this.hours=+e}},mm:{regex:"[0-5][0-9]",apply:function(e){this.minutes=+e}},m:{regex:"[0-9]|[1-5][0-9]",apply:function(e){this.minutes=+e}},sss:{regex:"[0-9][0-9][0-9]",apply:function(e){this.milliseconds=+e}},ss:{regex:"[0-5][0-9]",apply:function(e){this.seconds=+e}},s:{regex:"[0-9]|[1-5][0-9]",apply:function(e){this.seconds=+e}}};this.parse=function(t,i,o){if(!angular.isString(t)||!i)return t;i=e.DATETIME_FORMATS[i]||i,i=i.replace(n,"\\$&"),this.parsers[i]||(this.parsers[i]=a(i));var s=this.parsers[i],l=s.regex,u=s.map,c=t.match(l);if(c&&c.length){var p,d;p=o?{year:o.getFullYear(),month:o.getMonth(),date:o.getDate(),hours:o.getHours(),minutes:o.getMinutes(),seconds:o.getSeconds(),milliseconds:o.getMilliseconds()}:{year:1900,month:0,date:1,hours:0,minutes:0,seconds:0,milliseconds:0};for(var f=1,h=c.length;h>f;f++){var g=u[f-1];g.apply&&g.apply.call(p,c[f])}return r(p.year,p.month,p.date)&&(d=new Date(p.year,p.month,p.date,p.hours,p.minutes,p.seconds,p.milliseconds||0)),d}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(e,t){function a(e,a){return e.currentStyle?e.currentStyle[a]:t.getComputedStyle?t.getComputedStyle(e)[a]:e.style[a]}function r(e){return"static"===(a(e,"position")||"static")}var n=function(t){for(var a=e[0],n=t.offsetParent||a;n&&n!==a&&r(n);)n=n.offsetParent;return n||a};return{position:function(t){var a=this.offset(t),r={top:0,left:0},i=n(t[0]);i!=e[0]&&(r=this.offset(angular.element(i)),r.top+=i.clientTop-i.scrollTop,r.left+=i.clientLeft-i.scrollLeft);var o=t[0].getBoundingClientRect();return{width:o.width||t.prop("offsetWidth"),height:o.height||t.prop("offsetHeight"),top:a.top-r.top,left:a.left-r.left}},offset:function(a){var r=a[0].getBoundingClientRect();return{width:r.width||a.prop("offsetWidth"),height:r.height||a.prop("offsetHeight"),top:r.top+(t.pageYOffset||e[0].documentElement.scrollTop),left:r.left+(t.pageXOffset||e[0].documentElement.scrollLeft)}},positionElements:function(e,t,a,r){var n,i,o,s,l=a.split("-"),u=l[0],c=l[1]||"center";n=r?this.offset(e):this.position(e),i=t.prop("offsetWidth"),o=t.prop("offsetHeight");var p={center:function(){return n.left+n.width/2-i/2},left:function(){return n.left},right:function(){return n.left+n.width}},d={center:function(){return n.top+n.height/2-o/2},top:function(){return n.top},bottom:function(){return n.top+n.height}};switch(u){case"right":s={top:d[c](),left:p[u]()};break;case"left":s={top:d[c](),left:n.left-i};break;case"bottom":s={top:d[u](),left:p[c]()};break;default:s={top:n.top-o,left:p[c]()}}return s}}}]);